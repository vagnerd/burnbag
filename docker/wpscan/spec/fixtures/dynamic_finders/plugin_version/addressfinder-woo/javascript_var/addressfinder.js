!function(e){function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var t={};n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},n.p="",n(n.s=0)}([function(e,n,t){e.exports=t(1)},function(e,n,t){"use strict";var i=t(2),o=function(e){return e&&e.__esModule?e:{default:e}}(i);window.AF=window.AF||{},window.AF.WooCommercePlugin=o.default;var s=function(){var e=function(e){if(void 0==e)return null;try{e=JSON.parse(e)}catch(n){return AFC.debug&&alert("Invalid widget option: "+e),null}return e},n=e(window.AddressFinderConfig.widget_options),t=e(window.AddressFinderConfig.nz_widget_options),i=e(window.AddressFinderConfig.au_widget_options);window.AF._plugin=new AF.WooCommercePlugin({nzKey:window.AddressFinderConfig.key_nz||window.AddressFinderConfig.key||window.AddressFinderConfig.key_au,auKey:window.AddressFinderConfig.key_au||window.AddressFinderConfig.key||window.AddressFinderConfig.key_nz,nzWidgetOptions:t||n||{},auWidgetOptions:i||n||{},defaultCountry:window.AddressFinderConfig.default_country||"nz",debug:window.AddressFinderConfig.debug||!1})},d=function e(n,t){return t=t||5,"complete"==document.readyState?void setTimeout(s,1e3):0==t?void s():void setTimeout(function(){e("ignoredEvent",t-1)},1e3)},r=document.createElement("script");r.src="https://api.addressfinder.io/assets/v3/widget.js",r.async=1,r.onload=d,document.body.appendChild(r)},function(e,n,t){"use strict";function i(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}(),d=function(){function e(n){i(this,e),this.version="1.2.10",this.widgetConfig=n,$=window.jQuery,this.initialisePlugin()}return s(e,[{key:"_setWidgetPostion",value:function(e){e._getPosition=function(){var e=$(this.element).offset();return e.top+=$(this.element).outerHeight(),e}}},{key:"bindToAddressPanel",value:function(e){function n(n,i){switch($("#"+e+"country").val()){case"NZ":t.bind(this)("nz");break;case"AU":t.bind(this)("au");break;default:t.bind(this)("")}i||this._clearElementValues(e)}function t(e){for(var n=["nz","au"],t=0;t<n.length;t++)n[t]==e?(i[n[t]].enable(),this._setWidgetPostion(i[n[t]])):i[n[t]].disable()}var i={};i.null={enable:function(){},disable:function(){},on:function(){}},i.nz=new window.AddressFinder.Widget(document.getElementById(e+"address_1"),this.widgetConfig.nzKey,"nz",this.widgetConfig.nzWidgetOptions),i.nz.prefix=e,i.nz.on("result:select",this.selectNewZealand.bind(this,e)),i.au=new window.AddressFinder.Widget(document.getElementById(e+"address_1"),this.widgetConfig.auKey,"au",this.widgetConfig.auWidgetOptions),i.au.prefix=e,i.au.on("result:select",this.selectAustralia.bind(this,e));var o=$("#"+e+"country");o[0]?(o.change(n.bind(this)),n.bind(this)(null,!0)):t.bind(this)(this.widgetConfig.defaultCountry)}},{key:"checkFieldPresent",value:function(e,n){return!!document.getElementById(e+n)}},{key:"_clearElementValues",value:function(e){for(var n=["address_1","address_2","city","postcode"],t=0;t<n.length;t++)this.checkFieldPresent(e,n[t])&&this._setElementValue(e+n[t],"");this._setStateValue(e+"state","")}},{key:"selectAustralia",value:function(e,n,t){if(this.checkFieldPresent(e,"address_2"))this._setElementValue(e+"address_1",t.address_line_1),this._setElementValue(e+"address_2",t.address_line_2||"");else{var i=t.address_line_1+", "+t.address_line_2;this._setElementValue(e+"address_1",i)}this._setElementValue(e+"city",t.locality_name||""),this._setStateValue(e+"state",t.state_territory),this._setElementValue(e+"postcode",t.postcode)}},{key:"selectNewZealand",value:function(e,n,t){var i=new AddressFinder.NZSelectedAddress(n,t);this._setElementValue(e+"address_1",i.address_line_1_and_2()),this._setElementValue(e+"address_2",i.suburb()),this._setElementValue(e+"city",i.city()),this._setElementValue(e+"postcode",i.postcode()),this._setStateValue(e+"state",t.region)}},{key:"_dispatchEvent",value:function(e,n){var t;switch("undefined"==typeof Event?"undefined":o(Event)){case"function":t=new Event(n);default:t=document.createEvent("Event"),t.initEvent(n,!1,!0)}e.dispatchEvent(t)}},{key:"_setElementValue",value:function(e,n){var t=document.getElementById(e);if(t)return t.value=n,void this._dispatchEvent(t,"change");var i="AddressFinder Error - unable to find an element with id: "+e;return void alert(i)}},{key:"_setStateValue",value:function(e,n){var t=document.getElementById(e);if(t){var i={"Auckland Region":"AK","Bay Of Plenty Region":"BP","Canterbury Region":"CT","Gisborne Region":"GI","Hawke's Bay Region":"HB","Manawatu-Wanganui Region":"MW","Marlborough Region":"MB","Nelson Region":"NS","Northland Region":"NL","Otago Region":"OT","Southland Region":"SL","Taranaki Region":"TK","Tasman Region":"TM","Waikato Region":"WA","Wellington Region":"WE","West Coast Region":"WC","No Region (Chatham Islands)":null};if(t.options){for(var o=0;o<t.options.length;o++){var s=t.options[o],d=s.value==n||s.value==i[n]?s.value:"";if(d)break}t.value=d,this._dispatchEvent(t,"change")}}}},{key:"initialisePlugin",value:function(){document.getElementById("billing_address_1")&&this.bindToAddressPanel("billing_"),document.getElementById("shipping_address_1")&&this.bindToAddressPanel("shipping_")}}]),e}();n.default=d}]);